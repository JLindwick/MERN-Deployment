{"ast":null,"code":"import _slicedToArray from\"/Users/justinrussell/Desktop/mern/React Project/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import axios from'axios';import{useParams,useNavigate,Link,redirect}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default(function(){//keep track of what is being typed via useState hook\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),user=_useState6[0],setUser=_useState6[1];var navigate=useNavigate();var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),errors=_useState8[0],setErrors=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isValid=_useState10[0],setIsValid=_useState10[1];//handler when the form is submitted\nvar onSubmitHandler=function onSubmitHandler(){axios.get('http://localhost:8000/users').then(function(res){for(var i=0;i<res.data.length;i++){if(res.data[i].email===email){setUser(res.data[i]);}}})// .then(res =>navigate('/pirates')) // If successful, do something with the response. \n.catch(function(err){var errorResponse=err.response.data.errors;// Get the errors from err.response.data\nvar errorArr=[];// Define a temp error array to push the messages in\nfor(var _i=0,_Object$keys=Object.keys(errorResponse);_i<_Object$keys.length;_i++){var key=_Object$keys[_i];// Loop through all errors and get the messages\nerrorArr.push(errorResponse[key].message);}// Set Errors\nsetErrors(errorArr);console.log(errorArr);}).then(function(res){if(password===user.password){navigate('/pirates');}else{setErrors([\"username or password does not match\"]);}});};var onChangeEmail=function onChangeEmail(e){setEmail(e.target.value);};var onChangePassword=function onChangePassword(e){setPassword(e.target.value);};return/*#__PURE__*/_jsxs(_Fragment,{children:[errors.map(function(err,index){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{children:err})},index);}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:function onChange(e){return onChangeEmail(e);}})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",onChange:function onChange(e){return onChangePassword(e);}})]}),/*#__PURE__*/_jsx(\"button\",{onClick:onSubmitHandler,children:\"Submit\"})]});});","map":{"version":3,"names":["React","useState","axios","useParams","useNavigate","Link","redirect","email","setEmail","password","setPassword","user","setUser","navigate","errors","setErrors","isValid","setIsValid","onSubmitHandler","get","then","res","i","data","length","catch","err","errorResponse","response","errorArr","Object","keys","key","push","message","console","log","onChangeEmail","e","target","value","onChangePassword","map","index"],"sources":["/Users/justinrussell/Desktop/mern/React Project/client/src/components/LoginComponent.js"],"sourcesContent":["import React, { useState } from 'react'\nimport axios from 'axios';\nimport {useParams,useNavigate,Link, redirect} from 'react-router-dom';\n\nexport default () => {\n    //keep track of what is being typed via useState hook\n    const [email, setEmail] = useState(\"\"); \n    const [password,setPassword] = useState(\"\");\n    const [user,setUser] = useState([]);\n    const navigate = useNavigate();\n    const [errors,setErrors] = useState([])\n    const [isValid,setIsValid] = useState(false);\n    //handler when the form is submitted\n\n    const onSubmitHandler = () => {\n        axios.get('http://localhost:8000/users')\n            .then(res=> {\n                for(var i = 0;i<res.data.length;i++){\n                   if(res.data[i].email === email){\n                    setUser(res.data[i])\n                   }\n                }\n            })\n        // .then(res =>navigate('/pirates')) // If successful, do something with the response. \n            .catch(err=>{\n                const errorResponse = err.response.data.errors; // Get the errors from err.response.data\n                const errorArr = []; // Define a temp error array to push the messages in\n                for (const key of Object.keys(errorResponse)) { // Loop through all errors and get the messages\n                    errorArr.push(errorResponse[key].message)\n                }\n                // Set Errors\n                setErrors(errorArr)\n                console.log(errorArr)\n            })\n            .then(res=>{if(password === user.password) {\n                navigate('/pirates')\n              } else {\n                setErrors([\"username or password does not match\"])\n              }\n            })\n    }\n    const onChangeEmail = (e) => {\n        setEmail(e.target.value)\n    }\n    const onChangePassword = (e) => {\n        setPassword(e.target.value)\n    }\n\n    return (\n        <>\n                          {errors.map((err, index) => <div key={index}>{<p>{err}</p>}</div>)}\n\n            <p>\n                <label>Email</label><br/>\n                <input type=\"text\" onChange={(e) => onChangeEmail(e)}/>\n            </p>\n            <p>\n                <label>Password</label><br/>\n                <input type=\"password\" onChange={(e) => onChangePassword(e)} />\n            </p>         \n            <button onClick={onSubmitHandler} >Submit</button>\n\n        </>\n    )\n    }"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}